general:
  branches:
    only:
     - source

dependencies:
  pre:
    - sudo pip install pygments
    - go get -v github.com/spf13/hugo
    - npm install -g gulp
    - npm install gulp
    - npm install gulp-htmlmin
    - npm install gulp-base64

test:
  override:
    - hugo
    - gulp deploy
    - echo novelist.xyz > ./public/CNAME
    - touch ./public/.nojekyll

deployment:
  circleci:
    branch: source
    commands:
      - sh ./circle.sh
